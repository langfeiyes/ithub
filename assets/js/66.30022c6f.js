(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{390:function(s,t,a){"use strict";a.r(t);var n=a(4),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"脚手架-ruoyi-cloud-微服务版"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#脚手架-ruoyi-cloud-微服务版"}},[s._v("#")]),s._v(" 脚手架-RuoYi-Cloud 微服务版")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626191330354.png",alt:""}})]),s._v(" "),t("h2",{attrs:{id:"一、今日学习内容与目标"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、今日学习内容与目标"}},[s._v("#")]),s._v(" 一、今日学习内容与目标")]),s._v(" "),t("h3",{attrs:{id:"_1-1-前置知识点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-前置知识点"}},[s._v("#")]),s._v(" 1.1 前置知识点")]),s._v(" "),t("ul",[t("li",[s._v("Java WEB 知识体系")]),s._v(" "),t("li",[s._v("Spring、SpringMVC、SpringBoot  传统MVC框架体系")]),s._v(" "),t("li",[s._v("MyBatis 持久层框架体系")]),s._v(" "),t("li",[s._v("SpringCloud Alibaba 微服务落地方案")]),s._v(" "),t("li",[s._v("Maven、Git、Idea 常规开发工具")]),s._v(" "),t("li",[s._v("MySQL、Redis 常见关系/非关系型数据库")])]),s._v(" "),t("h3",{attrs:{id:"_1-2-教学目标"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-教学目标"}},[s._v("#")]),s._v(" 1.2 教学目标")]),s._v(" "),t("ul",[t("li",[s._v("掌握陌生项目解读技巧")]),s._v(" "),t("li",[s._v("掌握若依(RuoYi-Cloud)框架")]),s._v(" "),t("li",[s._v("掌握SpringCloud Alibaba体系项目开发套路")])]),s._v(" "),t("h2",{attrs:{id:"二、框架介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、框架介绍"}},[s._v("#")]),s._v(" 二、框架介绍")]),s._v(" "),t("h3",{attrs:{id:"_2-1-简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-简介"}},[s._v("#")]),s._v(" 2.1 简介")]),s._v(" "),t("p",[s._v("一直想做一款后台管理系统，看了很多优秀的开源项目但是发现没有合适的。于是利用空闲休息时间开始自己写了一套后台系统。如此有了若依。她可以用于所有的Web应用程序，如网站管理后台，网站会员中心，CMS，CRM，OA。所有前端后台代码封装过后十分精简易上手，出错概率低。同时支持移动客户端访问。系统会陆续更新一些实用功能。")]),s._v(" "),t("p",[s._v("性别男，若依是给女儿取的名字（寓意：你若不离不弃，我必生死相依）")]),s._v(" "),t("p",[s._v("若依是一套全部开源的快速开发平台，毫无保留给个人及企业免费使用。")]),s._v(" "),t("h3",{attrs:{id:"_2-2-内置功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-内置功能"}},[s._v("#")]),s._v(" 2.2 内置功能")]),s._v(" "),t("ul",[t("li",[s._v("用户管理：用户是系统操作者，该功能主要完成系统用户配置。")]),s._v(" "),t("li",[s._v("部门管理：配置系统组织机构（公司、部门、小组），树结构展现支持数据权限。")]),s._v(" "),t("li",[s._v("岗位管理：配置系统用户所属担任职务。")]),s._v(" "),t("li",[s._v("菜单管理：配置系统菜单，操作权限，按钮权限标识等。")]),s._v(" "),t("li",[s._v("角色管理：角色菜单权限分配、设置角色按机构进行数据范围权限划分。")]),s._v(" "),t("li",[s._v("字典管理：对系统中经常使用的一些较为固定的数据进行维护。")]),s._v(" "),t("li",[s._v("参数管理：对系统动态配置常用参数。")]),s._v(" "),t("li",[s._v("通知公告：系统通知公告信息发布维护。")]),s._v(" "),t("li",[s._v("操作日志：系统正常操作日志记录和查询；系统异常信息日志记录和查询。")]),s._v(" "),t("li",[s._v("登录日志：系统登录日志记录查询包含登录异常。")]),s._v(" "),t("li",[s._v("在线用户：当前系统中活跃用户状态监控。")]),s._v(" "),t("li",[s._v("定时任务：在线（添加、修改、删除)任务调度包含执行结果日志。")]),s._v(" "),t("li",[s._v("代码生成：前后端代码的生成（java、html、xml、sql）支持CRUD下载 。")]),s._v(" "),t("li",[s._v("系统接口：根据业务代码自动生成相关的api接口文档。")]),s._v(" "),t("li",[s._v("服务监控：监视当前系统CPU、内存、磁盘、堆栈等相关信息。")]),s._v(" "),t("li",[s._v("缓存监控：对系统的缓存查询，删除、清空等操作。")]),s._v(" "),t("li",[s._v("在线构建器：拖动表单元素生成相应的HTML代码。")]),s._v(" "),t("li",[s._v("连接池监视：监视当前系统数据库连接池状态，可进行分析SQL找出系统性能瓶颈。")])]),s._v(" "),t("h3",{attrs:{id:"_2-3-主要特性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-主要特性"}},[s._v("#")]),s._v(" 2.3 主要特性")]),s._v(" "),t("ul",[t("li",[s._v("完全响应式布局（支持电脑、平板、手机等所有主流设备）")]),s._v(" "),t("li",[s._v("强大的一键生成功能（包括控制器、模型、视图、菜单等）")]),s._v(" "),t("li",[s._v("支持多数据源，简单配置即可实现切换。")]),s._v(" "),t("li",[s._v("支持按钮及数据权限，可自定义部门数据权限。")]),s._v(" "),t("li",[s._v("对常用js插件进行二次封装，使js代码变得简洁，更加易维护")]),s._v(" "),t("li",[s._v("完善的XSS防范及脚本过滤，彻底杜绝XSS攻击")]),s._v(" "),t("li",[s._v("Maven多项目依赖，模块及插件分项目，尽量松耦合，方便模块升级、增减模块。")]),s._v(" "),t("li",[s._v("国际化支持，服务端及客户端支持")]),s._v(" "),t("li",[s._v("完善的日志记录体系简单注解即可实现")]),s._v(" "),t("li",[s._v("支持服务监控，数据监控，缓存监控功能。")])]),s._v(" "),t("h3",{attrs:{id:"_2-4-演示地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-演示地址"}},[s._v("#")]),s._v(" 2.4 演示地址")]),s._v(" "),t("p",[s._v("http://demo.ruoyi.vip/login")]),s._v(" "),t("p",[s._v("账号：admin 密码：admin123")]),s._v(" "),t("h3",{attrs:{id:"_2-5-分类"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-分类"}},[s._v("#")]),s._v(" 2.5 分类")]),s._v(" "),t("h4",{attrs:{id:"_2-5-1-传统版"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-1-传统版"}},[s._v("#")]),s._v(" 2.5.1 "),t("strong",[s._v("传统版")])]),s._v(" "),t("h5",{attrs:{id:"_2-5-1-1-源码地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-1-1-源码地址"}},[s._v("#")]),s._v(" 2.5.1.1 源码地址")]),s._v(" "),t("p",[s._v("https://gitee.com/y_project/RuoYi")]),s._v(" "),t("h5",{attrs:{id:"_2-5-1-2-在线文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-1-2-在线文档"}},[s._v("#")]),s._v(" 2.5.1.2 在线文档")]),s._v(" "),t("p",[s._v("http://doc.ruoyi.vip/ruoyi/")]),s._v(" "),t("h5",{attrs:{id:"_2-5-1-3-技术选型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-1-3-技术选型"}},[s._v("#")]),s._v(" 2.5.1.3 技术选型")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626185815229.png",alt:""}})]),s._v(" "),t("h5",{attrs:{id:"_2-5-1-4-代码结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-1-4-代码结构"}},[s._v("#")]),s._v(" 2.5.1.4 代码结构")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("com"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ruoyi     \n├── common            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 工具类")]),s._v("\n│       └── annotation                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 自定义注解")]),s._v("\n│       └── config                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 全局配置")]),s._v("\n│       └── constant                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通用常量")]),s._v("\n│       └── core                          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 核心控制")]),s._v("\n│       └── enums                         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通用枚举")]),s._v("\n│       └── exception                     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通用异常")]),s._v("\n│       └── json                          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// JSON数据处理")]),s._v("\n│       └── utils                         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通用类处理")]),s._v("\n│       └── xss                           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// XSS过滤处理")]),s._v("\n├── framework         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 框架核心")]),s._v("\n│       └── aspectj                       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 注解实现")]),s._v("\n│       └── config                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 系统配置")]),s._v("\n│       └── datasource                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 数据权限")]),s._v("\n│       └── interceptor                   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 拦截器")]),s._v("\n│       └── manager                       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 异步处理")]),s._v("\n│       └── shiro                         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 权限控制")]),s._v("\n│       └── web                           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 前端控制")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("generator   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 代码生成（不用可移除）")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("quartz      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 定时任务（不用可移除）")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("system      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 系统代码")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("admin       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 后台服务")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("xxxxxx      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 其他模块")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])]),t("h4",{attrs:{id:"_2-5-2-前后端分离版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-2-前后端分离版本"}},[s._v("#")]),s._v(" 2.5.2 前后端分离版本")]),s._v(" "),t("h5",{attrs:{id:"_2-5-2-1-源码地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-2-1-源码地址"}},[s._v("#")]),s._v(" 2.5.2.1 源码地址")]),s._v(" "),t("p",[s._v("https://gitee.com/y_project/RuoYi-Vue")]),s._v(" "),t("h5",{attrs:{id:"_2-5-2-2-在线文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-2-2-在线文档"}},[s._v("#")]),s._v(" 2.5.2.2 在线文档")]),s._v(" "),t("p",[s._v("http://doc.ruoyi.vip/ruoyi-vue/")]),s._v(" "),t("h5",{attrs:{id:"_2-5-2-3-技术选型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-2-3-技术选型"}},[s._v("#")]),s._v(" 2.5.2.3 技术选型")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626190400192.png",alt:""}})]),s._v(" "),t("h5",{attrs:{id:"_2-5-2-4-代码结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-2-4-代码结构"}},[s._v("#")]),s._v(" 2.5.2.4 代码结构")]),s._v(" "),t("p",[t("strong",[s._v("后端结构")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("com"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ruoyi     \n├── common            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 工具类")]),s._v("\n│       └── annotation                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 自定义注解")]),s._v("\n│       └── config                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 全局配置")]),s._v("\n│       └── constant                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通用常量")]),s._v("\n│       └── core                          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 核心控制")]),s._v("\n│       └── enums                         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通用枚举")]),s._v("\n│       └── exception                     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通用异常")]),s._v("\n│       └── filter                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 过滤器处理")]),s._v("\n│       └── utils                         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通用类处理")]),s._v("\n├── framework         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 框架核心")]),s._v("\n│       └── aspectj                       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 注解实现")]),s._v("\n│       └── config                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 系统配置")]),s._v("\n│       └── datasource                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 数据权限")]),s._v("\n│       └── interceptor                   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 拦截器")]),s._v("\n│       └── manager                       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 异步处理")]),s._v("\n│       └── security                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 权限控制")]),s._v("\n│       └── web                           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 前端控制")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("generator   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 代码生成（可移除）")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("quartz      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 定时任务（可移除）")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("system      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 系统代码")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("admin       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 后台服务")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("xxxxxx      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 其他模块")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("p",[t("strong",[s._v("前端结构")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("├── build                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 构建相关  ")]),s._v("\n├── bin                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 执行脚本")]),s._v("\n├── "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v("                     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 公共文件")]),s._v("\n│   ├── favicon"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ico            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// favicon图标")]),s._v("\n│   └── index"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// html模板")]),s._v("\n│   └── robots"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 反爬虫")]),s._v("\n├── src                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 源代码")]),s._v("\n│   ├── api                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 所有请求")]),s._v("\n│   ├── assets                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 主题 字体等静态资源")]),s._v("\n│   ├── components             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 全局公用组件")]),s._v("\n│   ├── directive              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 全局指令")]),s._v("\n│   ├── layout                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 布局")]),s._v("\n│   ├── plugins                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通用方法")]),s._v("\n│   ├── router                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 路由")]),s._v("\n│   ├── store                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 全局 store管理")]),s._v("\n│   ├── utils                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 全局公用方法")]),s._v("\n│   ├── views                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// view")]),s._v("\n│   ├── "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("App")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vue                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 入口页面")]),s._v("\n│   ├── main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 入口 加载组件 初始化等")]),s._v("\n│   ├── permission"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 权限管理")]),s._v("\n│   └── settings"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 系统配置")]),s._v("\n├── "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("editorconfig              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 编码格式")]),s._v("\n├── "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("development           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 开发环境配置")]),s._v("\n├── "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("production            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 生产环境配置")]),s._v("\n├── "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("staging               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 测试环境配置")]),s._v("\n├── "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("eslintignore              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 忽略语法检查")]),s._v("\n├── "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("eslintrc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// eslint 配置项")]),s._v("\n├── "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gitignore                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// git 忽略项")]),s._v("\n├── babel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// babel.config.js")]),s._v("\n├── "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// package.json")]),s._v("\n└── vue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// vue.config.js")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br")])]),t("h4",{attrs:{id:"_2-5-3-微服务版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-3-微服务版本"}},[s._v("#")]),s._v(" 2.5.3 微服务版本")]),s._v(" "),t("h5",{attrs:{id:"_2-5-3-1-源码地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-3-1-源码地址"}},[s._v("#")]),s._v(" 2.5.3.1 源码地址")]),s._v(" "),t("p",[s._v("https://gitee.com/y_project/RuoYi-Cloud")]),s._v(" "),t("h5",{attrs:{id:"_2-5-3-2-在线文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-3-2-在线文档"}},[s._v("#")]),s._v(" 2.5.3.2 在线文档")]),s._v(" "),t("p",[s._v("http://doc.ruoyi.vip/ruoyi-cloud/")]),s._v(" "),t("h5",{attrs:{id:"_2-5-3-3-技术选型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-3-3-技术选型"}},[s._v("#")]),s._v(" 2.5.3.3 技术选型")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626190728296.png",alt:""}})]),s._v(" "),t("h5",{attrs:{id:"_2-5-3-4-代码结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-3-4-代码结构"}},[s._v("#")]),s._v(" 2.5.3.4 代码结构")]),s._v(" "),t("p",[t("strong",[s._v("后端结构")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("com"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ruoyi     \n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ui              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 前端框架 [80]")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("gateway         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 网关模块 [8080]")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("auth            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 认证中心 [9200]")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("api             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 接口模块")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("api"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("system                          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 系统接口")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通用模块")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("core                         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 核心模块")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("datascope                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 权限范围")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("datasource                   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 多数据源")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("log                          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 日志记录")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("redis                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 缓存服务")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("seata                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 分布式事务")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("security                     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 安全模块")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("swagger                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 系统接口")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("modules         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 业务模块")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("system                              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 系统模块 [9201]")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("gen                                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 代码生成 [9202]")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("job                                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 定时任务 [9203]")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("file                                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 文件服务 [9300]")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("visual          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 图形化管理模块")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("visual"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("monitor                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 监控中心 [9100]")]),s._v("\n├──pom"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xml                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 公共依赖")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("p",[t("strong",[s._v("前端结构")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("├── build                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 构建相关  ")]),s._v("\n├── bin                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 执行脚本")]),s._v("\n├── "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v("                     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 公共文件")]),s._v("\n│   ├── favicon"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ico            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// favicon图标")]),s._v("\n│   └── index"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// html模板")]),s._v("\n├── src                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 源代码")]),s._v("\n│   ├── api                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 所有请求")]),s._v("\n│   ├── assets                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 主题 字体等静态资源")]),s._v("\n│   ├── components             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 全局公用组件")]),s._v("\n│   ├── directive              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 全局指令")]),s._v("\n│   ├── layout                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 布局")]),s._v("\n│   ├── plugins                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通用方法")]),s._v("\n│   ├── router                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 路由")]),s._v("\n│   ├── store                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 全局 store管理")]),s._v("\n│   ├── utils                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 全局公用方法")]),s._v("\n│   ├── views                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// view")]),s._v("\n│   ├── "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("App")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vue                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 入口页面")]),s._v("\n│   ├── main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 入口 加载组件 初始化等")]),s._v("\n│   ├── permission"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 权限管理")]),s._v("\n│   └── settings"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 系统配置")]),s._v("\n├── "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("editorconfig              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 编码格式")]),s._v("\n├── "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("development           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 开发环境配置")]),s._v("\n├── "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("production            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 生产环境配置")]),s._v("\n├── "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("staging               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 测试环境配置")]),s._v("\n├── "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("eslintignore              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 忽略语法检查")]),s._v("\n├── "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("eslintrc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// eslint 配置项")]),s._v("\n├── "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gitignore                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// git 忽略项")]),s._v("\n├── babel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// babel.config.js")]),s._v("\n├── "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// package.json")]),s._v("\n└── vue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// vue.config.js")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br")])]),t("h4",{attrs:{id:"_2-5-4-移动版"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-4-移动版"}},[s._v("#")]),s._v(" 2.5.4 移动版")]),s._v(" "),t("h5",{attrs:{id:"_2-5-4-1-源码地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-4-1-源码地址"}},[s._v("#")]),s._v(" 2.5.4.1 源码地址")]),s._v(" "),t("p",[s._v("https://gitee.com/y_project/RuoYi-App")]),s._v(" "),t("h5",{attrs:{id:"_2-5-4-2-在线文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-4-2-在线文档"}},[s._v("#")]),s._v(" 2.5.4.2 在线文档")]),s._v(" "),t("p",[s._v("http://doc.ruoyi.vip/ruoyi-app/")]),s._v(" "),t("h5",{attrs:{id:"_2-5-4-3-技术选型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-4-3-技术选型"}},[s._v("#")]),s._v(" 2.5.4.3 技术选型")]),s._v(" "),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626191035895.png",alt:""}})])]),s._v(" "),t("h5",{attrs:{id:"_2-5-4-4-代码结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-4-4-代码结构"}},[s._v("#")]),s._v(" 2.5.4.4 代码结构")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("├── api                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 所有请求  ")]),s._v("\n├── components                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 全局公用组件")]),s._v("\n├── pages                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 页面文件")]),s._v("\n├── plugins                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通用方法")]),s._v("\n├── store                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 全局 store管理")]),s._v("\n├── utils                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 公用方法")]),s._v("\n├── "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v("                     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 公共文件")]),s._v("\n│   ├── favicon"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ico            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// favicon图标")]),s._v("\n│   └── index"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// html模板")]),s._v("\n│   └── logo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("png               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// logo图片")]),s._v("\n├── uni_modules                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// uniui组件")]),s._v("\n│   ├── uni"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("badge              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 数字角标")]),s._v("\n│   ├── "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ........")]),s._v("\n│   ├── "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ........")]),s._v("\n├── "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("App")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vue                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 应用配置")]),s._v("\n├── config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 环境配置")]),s._v("\n├── main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Vue初始化入口文件")]),s._v("\n├── manifest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 配置打包")]),s._v("\n├── pages"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 配置页面路由")]),s._v("\n├── permission"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 权限拦截")]),s._v("\n├── uni"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("scss                   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 全局样式变量")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("h2",{attrs:{id:"三、源码下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、源码下载"}},[s._v("#")]),s._v(" 三、源码下载")]),s._v(" "),t("h3",{attrs:{id:"_3-1-说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-说明"}},[s._v("#")]),s._v(" 3.1 说明")]),s._v(" "),t("p",[s._v("本教程以若依微服版(RuoYi-Cloud)为解读蓝本，所有源码、文件、截图、演示均为该版本。")]),s._v(" "),t("h3",{attrs:{id:"_3-2-下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-下载"}},[s._v("#")]),s._v(" 3.2 下载")]),s._v(" "),t("p",[s._v("国内：https://gitee.com/y_project/RuoYi-Cloud")]),s._v(" "),t("p",[s._v("国外：https://github.com/yangzongzhuan/RuoYi-Cloud")]),s._v(" "),t("h3",{attrs:{id:"_3-3-idea克隆"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-idea克隆"}},[s._v("#")]),s._v(" 3.3 Idea克隆")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626193023708.png",alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626193052882.png",alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:"images/image-20230626193121648.png",alt:"image-20230626193121648"}})]),s._v(" "),t("h2",{attrs:{id:"四、项目上手技巧"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、项目上手技巧"}},[s._v("#")]),s._v(" 四、项目上手技巧")]),s._v(" "),t("h3",{attrs:{id:"_4-1-标准开源项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-标准开源项目"}},[s._v("#")]),s._v(" 4.1 标准开源项目")]),s._v(" "),t("p",[s._v("标准开源项目：指符合特定标准和规范的开源软件项目。这些标准和规范通常由开源社区、行业组织或相关标准制定机构定义和推广。标准开源项目的目的是提供一致的质量标准和最佳实践，以促进开源软件的可靠性、互操作性和可持续发展。")]),s._v(" "),t("p",[t("strong",[s._v("大白话：代码、文件、教程等各种配套都齐全的项目。")])]),s._v(" "),t("h4",{attrs:{id:"_4-1-1-看readme-md"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-1-看readme-md"}},[s._v("#")]),s._v(" 4.1.1 看README.md")]),s._v(" "),t("p",[s._v("标准开源项目，都是有一个README.md这种文档，这个文档是项目的简介，一般会用大白话方式讲清楚项目背景，项目技术点，项目具体使用等。")]),s._v(" "),t("h4",{attrs:{id:"_4-1-2-看演示项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-2-看演示项目"}},[s._v("#")]),s._v(" 4.1.2 看演示项目")]),s._v(" "),t("blockquote",[t("p",[s._v("http://vue.ruoyi.vip/login?redirect=%2Findex")])]),s._v(" "),t("p",[s._v("好处：快速了解项目具体功能，能做啥，实现效果怎么样。")]),s._v(" "),t("h4",{attrs:{id:"_4-1-3-看文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-3-看文档"}},[s._v("#")]),s._v(" 4.1.3 看文档")]),s._v(" "),t("blockquote",[t("p",[s._v("http://doc.ruoyi.vip/ruoyi-cloud/")])]),s._v(" "),t("p",[s._v("好处：该有的都有了")]),s._v(" "),t("p",[t("strong",[s._v("一个问题：看文档，看哪些内容？")])]),s._v(" "),t("p",[s._v("0>视频教程(如果有)")]),s._v(" "),t("p",[s._v("1>项目结构/架构(如果有)")]),s._v(" "),t("p",[s._v("2>技术选型")]),s._v(" "),t("p",[s._v("3>功能模块")]),s._v(" "),t("p",[s._v("4>项目部署")]),s._v(" "),t("p",[s._v("5>项目其他")]),s._v(" "),t("h3",{attrs:{id:"_4-2-非标准开源项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-非标准开源项目"}},[s._v("#")]),s._v(" 4.2 非标准开源项目")]),s._v(" "),t("p",[s._v("非标准开源项目是指没有遵循特定标准或规范的开源软件项目。这些项目可能是由个人、小团队或组织开发，其开发方式和治理模式可能与传统的标准开源项目有所不同。")]),s._v(" "),t("p",[t("strong",[s._v("大白话：代码、文件、教程等各种配套都不齐全的项目。")])]),s._v(" "),t("h4",{attrs:{id:"_4-2-1-看readme-md"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-1-看readme-md"}},[s._v("#")]),s._v(" 4.2.1 看README.md")]),s._v(" "),t("p",[s._v("如果有，必须看。但一般情况，都是下面这种：啥都是没有")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626195720645.png",alt:""}})]),s._v(" "),t("h4",{attrs:{id:"_4-2-2-看jar依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2-看jar依赖"}},[s._v("#")]),s._v(" 4.2.2 看Jar依赖")]),s._v(" "),t("p",[s._v("没有使用Maven/Gradle传统项目，比如Java SE/JavaWeb项目，Jar依赖一般放置在lib文件夹，优先找它")]),s._v(" "),t("p",[s._v("如果使用Maven/Gradle常规项目，找pom.xml文件或build.gradle")]),s._v(" "),t("p",[t("strong",[s._v("一个问题：看Jar依赖目的是啥？")])]),s._v(" "),t("p",[s._v("1>大体把握项目技术栈")]),s._v(" "),t("p",[s._v("​    要求：结合技术栈，YY一下代码可能的结构，后续项目解读时有参照蓝本。")]),s._v(" "),t("p",[s._v("​    比如：\n​         MyBatis---domain----mapper.java-----mapper.xml")]),s._v(" "),t("p",[s._v("​         Springboot----Spring----Springmvc----Controller----启动类")]),s._v(" "),t("p",[s._v("​\t\t SpringCloud Alibaba-----8个基本组件")]),s._v(" "),t("p",[s._v("2>大体推测项目有哪些功能")]),s._v(" "),t("p",[s._v("​    要求：常见的功能jar有熟悉，不认识，可以搜。")]),s._v(" "),t("p",[s._v("​     比如：")]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("io.springfox"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("springfox-swagger-ui"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("${swagger.fox.version}"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("io.jsonwebtoken"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("jjwt"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("org.apache.poi"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("poi-ooxml"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h4",{attrs:{id:"_4-2-3-看代码结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-3-看代码结构"}},[s._v("#")]),s._v(" 4.2.3 看代码结构")]),s._v(" "),t("p",[s._v("没有文档的帮助，只能借助代码结构名称大体推测项目可能具有模块，拥有的功能。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626205452813.png",alt:""}})]),s._v(" "),t("h4",{attrs:{id:"_4-2-4-yy联想"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-4-yy联想"}},[s._v("#")]),s._v(" 4.2.4 YY联想")]),s._v(" "),t("p",[s._v("非开源项目最麻烦一个点就是文件不齐全，少文档，少sql数据库，甚至代码不完整。这时候想解读通这代码就需要很丰富的想象能力。")]),s._v(" "),t("blockquote",[t("p",[s._v("类似一拳超人中地表最强的男人：King ！哥的厉害全靠你想象")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/e850352ac65c10381531e3b5b1119313b07e897d.jpg",alt:""}})]),s._v(" "),t("p",[s._v("这个得结合个人开发经验，项目经验，生活阅历，连蒙靠猜推测去补齐项目逻辑啦。")]),s._v(" "),t("p",[s._v("比如：")]),s._v(" "),t("p",[s._v("缺SQL：找Mapper.xml/domain实体补齐")]),s._v(" "),t("p",[s._v("缺Jar包：根据项目启动报错信息，缺哪个补哪个")]),s._v(" "),t("p",[s._v("缺配置文件：项目依赖用到哪些jar，结合常规配置，补齐配置")]),s._v(" "),t("p",[s._v("缺少各种环境：结合个人开发经验，尝试补齐。")]),s._v(" "),t("h3",{attrs:{id:"_4-3-若依初探"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-若依初探"}},[s._v("#")]),s._v(" 4.3 若依初探")]),s._v(" "),t("p",[s._v("若依脚手架算是一个较为标准的开源项目了，那它阶段就按照标准项目方式解读即可。")]),s._v(" "),t("h4",{attrs:{id:"_4-3-1-标准开源项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-1-标准开源项目"}},[s._v("#")]),s._v(" 4.3.1 标准开源项目")]),s._v(" "),t("h5",{attrs:{id:"_4-3-1-1-看readme-md"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-1-1-看readme-md"}},[s._v("#")]),s._v(" 4.3.1.1 看README.md")]),s._v(" "),t("p",[s._v("--了解项目整体")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626210024682.png",alt:""}})]),s._v(" "),t("h5",{attrs:{id:"_4-3-1-2-看演示项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-1-2-看演示项目"}},[s._v("#")]),s._v(" 4.3.1.2 看演示项目")]),s._v(" "),t("p",[s._v("--了解项目效果")]),s._v(" "),t("p",[s._v("地址：http://vue.ruoyi.vip/index")]),s._v(" "),t("p",[s._v("账号密码：admin/admin123")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626210112384.png",alt:""}})]),s._v(" "),t("h5",{attrs:{id:"_4-3-1-3-看文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-1-3-看文档"}},[s._v("#")]),s._v(" 4.3.1.3 看文档")]),s._v(" "),t("p",[s._v("--了解项目细节")]),s._v(" "),t("p",[s._v("地址：http://doc.ruoyi.vip/ruoyi-cloud/")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626210146701.png",alt:""}})]),s._v(" "),t("h4",{attrs:{id:"_4-3-2-架构设计图"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-2-架构设计图"}},[s._v("#")]),s._v(" 4.3.2 架构设计图")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/up-82e9722ecb846786405a904bafcf19f73f3.png",alt:""}})]),s._v(" "),t("p",[s._v("从图中解析出RuoYi-Cloud 使用微服务技术栈")]),s._v(" "),t("p",[s._v("网关：Gateway")]),s._v(" "),t("p",[s._v("远程调用：Ribbon/Feign")]),s._v(" "),t("p",[s._v("注册中心：Nacos Discovery")]),s._v(" "),t("p",[s._v("熔断降级：Sentinel")]),s._v(" "),t("p",[s._v("配置中心：Nacos Config")]),s._v(" "),t("p",[s._v("链路追踪：Sleuth+ZipKin/SkyWalking   （没有集成，需要自己加）")]),s._v(" "),t("h4",{attrs:{id:"_4-3-3-代码结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-3-代码结构"}},[s._v("#")]),s._v(" 4.3.3 代码结构")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("com"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ruoyi     \n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ui              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 前端框架 [80]")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("gateway         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 网关模块 [8080]")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("auth            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 认证中心 [9200]")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("api             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 接口模块")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("api"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("system                          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 系统接口")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通用模块")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("core                         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 核心模块")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("datascope                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 权限范围")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("datasource                   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 多数据源")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("log                          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 日志记录")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("redis                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 缓存服务")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("seata                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 分布式事务")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("security                     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 安全模块")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("swagger                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 系统接口")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("modules         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 业务模块")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("system                              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 系统模块 [9201]")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("gen                                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 代码生成 [9202]")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("job                                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 定时任务 [9203]")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("file                                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 文件服务 [9300]")]),s._v("\n├── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("visual          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 图形化管理模块")]),s._v("\n│       └── ruoyi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("visual"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("monitor                      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 监控中心 [9100]")]),s._v("\n├──pom"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xml                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 公共依赖")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("h2",{attrs:{id:"五、环境准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五、环境准备"}},[s._v("#")]),s._v(" 五、环境准备")]),s._v(" "),t("p",[s._v("项目运行前提需要准备环境，如果项目提供文档，直接看文档操作即可，如果没有文档，就结合开发经验/项目经验来配置。一般来说，项目环境准备都按照下面几个步骤。")]),s._v(" "),t("h3",{attrs:{id:"_5-1-语言环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-语言环境"}},[s._v("#")]),s._v(" 5.1 语言环境")]),s._v(" "),t("p",[s._v("项目运行离不开语言支持，若依(RuoYi-Cloud)后端为Java项目，需要java环境，前端为Vue项目，需要Node.js环境，运行若依前需要将这些环境安装成功。")]),s._v(" "),t("h4",{attrs:{id:"_5-1-1-java环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-1-java环境"}},[s._v("#")]),s._v(" "),t("strong",[s._v("5.1.1 Java环境")])]),s._v(" "),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626232309233.png",alt:""}})])]),s._v(" "),t("h4",{attrs:{id:"_5-1-2-node-js环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-2-node-js环境"}},[s._v("#")]),s._v(" 5.1.2 "),t("strong",[s._v("node.js环境")])]),s._v(" "),t("p",[s._v("一个node.js环境，一个事npm 软件安装工具")]),s._v(" "),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626232356403.png",alt:""}})])]),s._v(" "),t("h3",{attrs:{id:"_5-2-数据库环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-数据库环境"}},[s._v("#")]),s._v(" 5.2 数据库环境")]),s._v(" "),t("p",[s._v("若依(RuoYi-Cloud)目前使用的数据库暂时只有MySQL跟Redis，后续可以根据项目需要添加其他数据库，比如MongoDB，Elasticsearch等。")]),s._v(" "),t("h4",{attrs:{id:"_5-2-1-mysql环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-1-mysql环境"}},[s._v("#")]),s._v(" 5.2.1 "),t("strong",[s._v("MySQL环境")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626232942516.png",alt:""}})]),s._v(" "),t("h4",{attrs:{id:"_5-2-2-redis环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-2-redis环境"}},[s._v("#")]),s._v(" 5.2.2 "),t("strong",[s._v("Redis环境")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626233013340.png",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"_5-3-组件环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-组件环境"}},[s._v("#")]),s._v(" 5.3 组件环境")]),s._v(" "),t("p",[s._v("若依(RuoYi-Cloud)使用的是SpringCloud Alibaba体系微服务落地方法，那就得安装2个必须组件：Nacos跟Sentinel。")]),s._v(" "),t("h4",{attrs:{id:"_5-3-1-nacos环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-1-nacos环境"}},[s._v("#")]),s._v(" 5.3.1 "),t("strong",[s._v("Nacos环境")])]),s._v(" "),t("p",[s._v("若依(RuoYi-Cloud)使用Nacos做注册中心与配置中心，所以需要提前准备该环境。")]),s._v(" "),t("p",[s._v("下载路径：https://github.com/alibaba/nacos/releases")]),s._v(" "),t("p",[s._v("这里注意，若依(RuoYi-Cloud)要求是Nacos 2.x版本，不要下错")]),s._v(" "),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626233557839.png",alt:""}})])]),s._v(" "),t("p",[s._v("进入bin目录启动，执行startup.cmd命令，注意需要使用单例模式启动，否则闪退")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("使用cmd 命令，进入命令框，执行下面命令\nstartup.cmd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v(" standalone\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626233834740.png",alt:""}})]),s._v(" "),t("h4",{attrs:{id:"_5-3-2-sentinel环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-2-sentinel环境"}},[s._v("#")]),s._v(" 5.3.2 "),t("strong",[s._v("Sentinel环境")])]),s._v(" "),t("p",[s._v("若依(RuoYi-Cloud)使用Sentinel熔断降级组件，那么项目启动前，需要提前准备好")]),s._v(" "),t("p",[s._v("下载地址：https://github.com/alibaba/Sentinel/releases")]),s._v(" "),t("p",[s._v("下载完之后是一个jar包：sentinel-dashboard-1.8.0.jar， 使用java 命令执行就行")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("java")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Dserver.port")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Dcsp.sentinel.dashboard.server")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("localhost:8080 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Dproject.name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("sentinel-dashboard "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-jar")]),s._v(" sentinel-dashboard-1.8.0.jar\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"_5-3-3-seata环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-3-seata环境"}},[s._v("#")]),s._v(" 5.3.3 "),t("strong",[s._v("Seata环境")])]),s._v(" "),t("p",[s._v("若依(RuoYi-Cloud)支持Seata实现分布式事务，如果需要，项目启动前就应该提前准备好")]),s._v(" "),t("p",[s._v("下载地址：https://github.com/seata/seata/releases")]),s._v(" "),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626234855831.png",alt:""}})])]),s._v(" "),t("p",[s._v("进入bin目录启动，执行seata-server.bat命令")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("seata-server.bat --add-opens"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("java.base/java.lang"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ALL-UNNAMED\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"六、项目配置与启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#六、项目配置与启动"}},[s._v("#")]),s._v(" 六、项目配置与启动")]),s._v(" "),t("p",[s._v("当上面环境全部准备好之后，接下来就是项目配置。需要将项目相关配置修改成当前相关环境。")]),s._v(" "),t("h3",{attrs:{id:"_6-1-后端配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-后端配置"}},[s._v("#")]),s._v(" 6.1 后端配置")]),s._v(" "),t("h4",{attrs:{id:"_6-1-1-数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-1-数据库"}},[s._v("#")]),s._v(" 6.1.1 数据库")]),s._v(" "),t("p",[t("strong",[s._v("新建数据库：ry-cloud")]),s._v("   存储常规数据")]),s._v(" "),t("p",[s._v("字符编码：utf8mb4")]),s._v(" "),t("p",[s._v("导入SQL：sql/ry_20230223.sql       sql/quartz.sql(可选--需要定时任务操作必须导入)")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626235621833.png",alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626235633293.png",alt:""}})]),s._v(" "),t("p",[s._v("**新建数据库：ry-config **   存储nacos配置数据")]),s._v(" "),t("p",[s._v("字符编码：utf8mb4")]),s._v(" "),t("p",[s._v("导入SQL：sql/ry_config_20220929.sql")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626235725038.png",alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230626235845669.png",alt:"image-20230626235845669"}})]),s._v(" "),t("h4",{attrs:{id:"_6-1-2-nacos配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-2-nacos配置"}},[s._v("#")]),s._v(" 6.1.2 Nacos配置")]),s._v(" "),t("p",[s._v("若依(RuoYi-Cloud) 配置中心的项目配置文件，持久化在"),t("strong",[s._v("ry-config.config_info")]),s._v("  表中，项目启动需要将这些配置文件加载到配置中心，所以需要额外配置一下Nacos，以增加对mysql数据源的支持。")]),s._v(" "),t("p",[s._v("进入nacos-server-2.2.2/conf 目录找：application.properties")]),s._v(" "),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627001017623.png",alt:""}})])]),s._v(" "),t("p",[s._v("修改配置")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## db mysql")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.datasource.platform")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("mysql")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("db.num")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("db.url.0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("jdbc:mysql://localhost:3306/ry-config?characterEncoding=utf8&connectTimeout=1000&socketTimeout=3000&autoReconnect=true&useUnicode=true&useSSL=false&serverTimezone=UTC")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("db.user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("数据库账号")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("db.password")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("数据库密码")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627001136980.png",alt:""}})])]),s._v(" "),t("h4",{attrs:{id:"_6-1-3-项目配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-3-项目配置文件"}},[s._v("#")]),s._v(" 6.1.3 项目配置文件")]),s._v(" "),t("p",[s._v("Nacos配置好之后，启动成功后访问：http://localhost:8848/nacos   账号/密码  nacos/nacos")]),s._v(" "),t("p",[s._v("修改下面画红线的服务配置文件")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627002316239.png",alt:""}})]),s._v(" "),t("p",[s._v("主要改动：")]),s._v(" "),t("p",[s._v("Redis 的ip，端口，密码")]),s._v(" "),t("p",[s._v("MySQL ip，端口，账号，密码，数据库等。")]),s._v(" "),t("p",[s._v("比如：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627002521102.png",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"_6-2-后端启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-后端启动"}},[s._v("#")]),s._v(" 6.2 后端启动")]),s._v(" "),t("p",[s._v("打开项目，执行XxxxApplication的启动类（启动没有先后顺序）")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("RuoYiGatewayApplication")]),s._v(" （网关模块 必须）")]),s._v(" "),t("li",[t("strong",[s._v("RuoYiAuthApplication")]),s._v(" （认证模块 必须）")]),s._v(" "),t("li",[t("strong",[s._v("RuoYiSystemApplication")]),s._v(" （系统模块 必须）")]),s._v(" "),t("li",[s._v("RuoYiMonitorApplication （监控中心 可选）")]),s._v(" "),t("li",[s._v("RuoYiGenApplication （代码生成 可选）")]),s._v(" "),t("li",[s._v("RuoYiJobApplication （定时任务 可选）")]),s._v(" "),t("li",[s._v("RuoYFileApplication （文件服务 可选）")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627002804791.png",alt:""}})]),s._v(" "),t("p",[s._v("加粗的启动即可。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627003033653.png",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"_6-3-前端配置与启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-前端配置与启动"}},[s._v("#")]),s._v(" 6.3 前端配置与启动")]),s._v(" "),t("p",[s._v("若依(RuoYi-Cloud) 项目前端跟后端是保存在同一个目录夹的。")]),s._v(" "),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627003152676.png",alt:""}})])]),s._v(" "),t("p",[s._v("先进入这个目录，然后使用前端编辑工具打开即可，这里使用Visual Studio Code 打开")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627003442203.png",alt:""}})]),s._v(" "),t("p",[s._v("进入vscode之后，打开项目README.md文件")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627003552149.png",alt:""}})]),s._v(" "),t("p",[s._v("打开vscode 的终端，执行上面命令")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627003631614.png",alt:""}})]),s._v(" "),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627004845629.png",alt:""}})])]),s._v(" "),t("h3",{attrs:{id:"_6-4-访问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-访问"}},[s._v("#")]),s._v(" 6.4 访问")]),s._v(" "),t("p",[s._v("当后端，前端都启动成功之后，若依(RuoYi-Cloud) 项目就算运行成功啦。")]),s._v(" "),t("p",[s._v("访问地址：http://localhost/")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627005030844.png",alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627005050272.png",alt:""}})]),s._v(" "),t("h2",{attrs:{id:"七、模块解读"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#七、模块解读"}},[s._v("#")]),s._v(" 七、模块解读")]),s._v(" "),t("p",[s._v("项目解读可以说分为2部分： 1>项目结构解读(静态解读)   2>业务模块解读(动态解读)")]),s._v(" "),t("p",[s._v("前面种种都属于项目结构范畴，解下来就是业务模块解读，这里选择鉴权，网关，代码生成器3个核心模块讲解若依(RuoYi-Cloud)脚手架的使用。")]),s._v(" "),t("h3",{attrs:{id:"_7-1-解读技巧"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-解读技巧"}},[s._v("#")]),s._v(" 7.1 解读技巧")]),s._v(" "),t("p",[s._v("只要是Java Web项目，流程主干线永远不变： "),t("strong",[s._v("发起请求---处理请求----响应请求")])]),s._v(" "),t("p",[s._v("找一个业务逻辑相对简单的模块，围绕主线去追踪即可。根据以往的经验，请求到响应大体流程图如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627024232636.png",alt:""}})]),s._v(" "),t("p",[s._v("把上面流程具体化之后就是：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("前端")]),s._v(" "),t("p",[s._v("客户端如何发起请求（关注路径/方式/参数），一般使用浏览器的F12查看")])]),s._v(" "),t("li",[t("p",[s._v("后端")]),s._v(" "),t("p",[s._v("接口接收请求，处理请求，响应请求。(关注：单个服务操作/多服务协同操作)，一般追踪请求流程。")])])]),s._v(" "),t("p",[s._v("​       简单流程：网关---过滤器---拦截器--微服务(请求处理)")]),s._v(" "),t("p",[s._v("​       复杂流程：网关---上游过滤器---上游拦截器--上游微服务(处理)-----下游过滤器---下游拦截器--下游微服务(处理)")]),s._v(" "),t("h3",{attrs:{id:"_7-2-请求闭环"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-请求闭环"}},[s._v("#")]),s._v(" 7.2 请求闭环")]),s._v(" "),t("p",[s._v("这里结合上面主线，走一个完整的请求闭环，以获取登录验证码获取为例子。")]),s._v(" "),t("h4",{attrs:{id:"_7-2-1-前端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-1-前端"}},[s._v("#")]),s._v(" 7.2.1 前端")]),s._v(" "),t("p",[s._v("项目进入第一个页面是登录页面")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627025010494.png",alt:""}})]),s._v(" "),t("p",[s._v("浏览器F12，查看到第一个接口：http://localhost/dev-api/code")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627025050988.png",alt:""}})]),s._v(" "),t("p",[s._v("**localhost：**前端项目启动默认访问ip， 为本地")]),s._v(" "),t("p",[s._v("**端口：**没有端口，默认端口为80")]),s._v(" "),t("p",[s._v("**dev-api：**若依框架约定的开发环境使用上下文，可以在.env.development中配置")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627082907769.png",alt:""}})]),s._v(" "),t("p",[s._v("**code：**请求路径")]),s._v(" "),t("p",[s._v("完整的：http://locallhost:80/dev-api/code 是由下面异步请求发起的")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627083244710.png",alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627083540269.png",alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627083650541.png",alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627083726062.png",alt:""}})]),s._v(" "),t("p",[s._v("当前端发起请求后，就到后端接收请求处理，处理请求，与响应请求啦。")]),s._v(" "),t("h4",{attrs:{id:"_7-2-2-后端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-2-后端"}},[s._v("#")]),s._v(" 7.2.2 后端")]),s._v(" "),t("p",[s._v("前端发起请求，后端接收请求，那请求最先去到哪呢？")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/up-82e9722ecb846786405a904bafcf19f73f3.png",alt:"ruoyi-cloud"}})]),s._v(" "),t("p",[s._v("看若依(RuoYi-Cloud)框架的架构图，请求最先进入的网关。当然也可以通过前端代理服务配置定位到请求会转发到网关服务。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627085133404.png",alt:""}})]),s._v(" "),t("p",[s._v("当确认请求入口之后，只需快速定位ruoyi-gateway即可。")]),s._v(" "),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627084350851.png",alt:""}})])]),s._v(" "),t("p",[s._v("此时还存在一个问题，网关哪个类处理/code请求？")]),s._v(" "),t("p",[s._v("如果有WebFlux编程经验，大体能猜到RouterFunctionConfiguration类")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Configuration")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RouterFunctionConfiguration")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ValidateCodeHandler")]),s._v(" validateCodeHandler"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@SuppressWarnings")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rawtypes"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Bean")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RouterFunction")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("routerFunction")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RouterFunctions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("route")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestPredicates")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("GET")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/code"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("and")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestPredicates")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("accept")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MediaType")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TEXT_PLAIN")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                validateCodeHandler"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[s._v("RouterFunction 是 Spring WebFlux 中定义路由的函数式编程方式。")]),s._v(" "),t("p",[s._v("在 Spring WebFlux 中，我们可以使用 "),t("code",[s._v("RouterFunction")]),s._v(" 来定义路由规则，将请求映射到相应的处理器函数上。")]),s._v(" "),t("p",[s._v("上面代码意思是前端发过来/code由validateCodeHandler 来处理")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Component")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ValidateCodeHandler")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HandlerFunction")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServerResponse")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ValidateCodeService")]),s._v(" validateCodeService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Mono")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServerResponse")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("handle")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServerRequest")]),s._v(" serverRequest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AjaxResult")]),s._v(" ajax"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//构建验证码，封装成AjaxResult对象")]),s._v("\n            ajax "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" validateCodeService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createCaptcha")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CaptchaException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Mono")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("error")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServerResponse")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpStatus")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("OK")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("body")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BodyInserters")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fromValue")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ajax"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AjaxResult")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createCaptcha")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CaptchaException")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AjaxResult")]),s._v(" ajax "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AjaxResult")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("success")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" captchaEnabled "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" captchaProperties"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getEnabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    ajax"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"captchaEnabled"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" captchaEnabled"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n    ajax"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"uuid"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" uuid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    ajax"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"img"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Base64")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("encode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("os"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("toByteArray")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" ajax"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("最终将生成的验证码封装在AjaxResult 响应回客户端。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627085805996.png",alt:""}})]),s._v(" "),t("p",[s._v("那如果说没有Spring WebFlux经验怎么办？很简单，使用idea 搜/code 字符，然后借助ChatGPT猜测代码啥意思")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627090056877.png",alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627090235025.png",alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627090412040.png",alt:""}})]),s._v(" "),t("p",[s._v("到这，一个完整请求闭环就完成了，后续其他请求便是同理可得。")]),s._v(" "),t("h3",{attrs:{id:"_7-3-网关模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-网关模块"}},[s._v("#")]),s._v(" 7.3 网关模块")]),s._v(" "),t("p",[s._v("网关为项目入口，若依(RuoYi-Cloud)项目入口结构可以简化为这样")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627115900446.png",alt:""}})]),s._v(" "),t("p",[s._v("在ruoyi-gateway网关微服务中配置了所有微服务路由映射")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627102732901.png",alt:""}})]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cloud")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("gateway")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("discovery")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("locator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("lowerCaseServiceId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("enabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("routes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 认证中心")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ruoyi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("auth\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uri")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" lb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//ruoyi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("auth\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("predicates")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" Path=/auth/"),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("**")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("filters")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 验证码处理")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" CacheRequestFilter\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ValidateCodeFilter\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" StripPrefix=1\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 代码生成")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ruoyi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("gen\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uri")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" lb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//ruoyi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("gen\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("predicates")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" Path=/code/"),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("**")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("filters")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" StripPrefix=1\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 定时任务")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ruoyi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("job\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uri")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" lb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//ruoyi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("job\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("predicates")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" Path=/schedule/"),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("**")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("filters")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" StripPrefix=1\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 系统模块")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ruoyi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uri")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" lb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//ruoyi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("predicates")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" Path=/system/"),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("**")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("filters")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" StripPrefix=1\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 文件服务")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ruoyi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("file\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uri")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" lb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//ruoyi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("file\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("predicates")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" Path=/file/"),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("**")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("filters")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" StripPrefix=1\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br")])]),t("p",[s._v("前端发起所有请都统一经过网关，再借由网关路由统一转发。")]),s._v(" "),t("p",[s._v("访问ruoyi-file微服务路径规则：   http://localhost:80/dev-api/file/**")]),s._v(" "),t("p",[s._v("访问ruoyi-gen微服务路径规则：   http://localhost:80/dev-api/code/**")]),s._v(" "),t("p",[s._v("访问ruoyi-job微服务路径规则：   http://localhost:80/dev-api/schedule/**")]),s._v(" "),t("p",[s._v("访问ruoyi-system微服务路径规则：   http://localhost:80/dev-api/system/**")]),s._v(" "),t("p",[s._v("访问ruoyi-auth微服务路径规则：   http://localhost:80/dev-api/auth/**")]),s._v(" "),t("h3",{attrs:{id:"_7-4-鉴权模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-4-鉴权模块"}},[s._v("#")]),s._v(" 7.4 鉴权模块")]),s._v(" "),t("p",[s._v("若依(RuoYi-Cloud)鉴权模块涉及到这几个组件")]),s._v(" "),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627120634170.png",alt:""}})])]),s._v(" "),t("p",[s._v("若依(RuoYi-Cloud)框架登录鉴权有2种模式：")]),s._v(" "),t("p",[s._v("外部鉴权：客户端访问服务端(微服务)，以JWT令牌为判断依据，有且合法放行，没有或不合法拒绝")]),s._v(" "),t("p",[s._v("内部鉴权：上游微服务访问下游微服务，以请求头标记："),t("strong",[s._v("from-source=inner")]),s._v("有无位依据，有放行，没有拒绝")]),s._v(" "),t("h4",{attrs:{id:"_7-4-1-外部鉴权"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-4-1-外部鉴权"}},[s._v("#")]),s._v(" 7.4.1 外部鉴权")]),s._v(" "),t("h5",{attrs:{id:"_7-4-1-1-步骤1-jwt获取"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-4-1-1-步骤1-jwt获取"}},[s._v("#")]),s._v(" 7.4.1.1 "),t("strong",[s._v("步骤1：JWT获取")])]),s._v(" "),t("p",[s._v("登录页面点击登录发起：http://localhost/dev-api/auth/login 请求")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627102627157.png",alt:""}})]),s._v(" "),t("p",[s._v("请求中auth前缀为网关配置ry-auth服务路由映射")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627102732901.png",alt:"image-20230627102732901"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627102800679.png",alt:""}})]),s._v(" "),t("p",[s._v("借助网格路由，进入ry-auth微服务，TokenController请求处理类")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RestController")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TokenController")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@PostMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"login"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("R")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("login")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestBody")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LoginBody")]),s._v(" form"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 用户登录")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LoginUser")]),s._v(" userInfo "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" sysLoginService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("login")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("form"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUsername")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" form"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getPassword")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取登录token")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("R")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ok")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tokenService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createToken")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userInfo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("    \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * 创建令牌\n     */")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Map")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createToken")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LoginUser")]),s._v(" loginUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" token "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IdUtils")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fastUUID")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" userId "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" loginUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSysUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUserId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" userName "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" loginUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSysUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUserName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        loginUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setToken")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("token"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        loginUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setUserid")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        loginUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setUsername")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        loginUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setIpaddr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IpUtils")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getIpAddr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("refreshToken")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("loginUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//redis缓存令牌")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Jwt存储信息")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Map")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" claimsMap "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        claimsMap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SecurityConstants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("USER_KEY")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" token"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        claimsMap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SecurityConstants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DETAILS_USER_ID")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" userId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        claimsMap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SecurityConstants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DETAILS_USERNAME")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" userName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 接口返回信息")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Map")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" rspMap "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        rspMap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"access_token"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JwtUtils")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createToken")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("claimsMap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        rspMap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("put")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"expires_in"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" expireTime"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" rspMap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br")])]),t("p",[s._v("响应返回：")]),s._v(" "),t("p",[t("img",{attrs:{src:"images/!%5B%5D(https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627103210377.png)",alt:""}})]),s._v(" "),t("h5",{attrs:{id:"_7-4-1-2-步骤2-jwt鉴权"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-4-1-2-步骤2-jwt鉴权"}},[s._v("#")]),s._v(" 7.4.1.2 "),t("strong",[s._v("步骤2：JWT鉴权")])]),s._v(" "),t("p",[s._v("当客户登录成功之后，后续请求进入网关，网关转发到对应的微服务，该微服务会引用：ruoyi-common-security 鉴权模块，请求进来后，切面判断请求持有的JWT令牌，有且合法放行，没有或不合法拒绝")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627103917494.png",alt:""}})]),s._v(" "),t("h5",{attrs:{id:"_7-4-1-3-步骤3-jwt鉴权实现"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-4-1-3-步骤3-jwt鉴权实现"}},[s._v("#")]),s._v(" 7.4.1.3 "),t("strong",[s._v("步骤3：JWT鉴权实现")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Aspect")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Component")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("PreAuthorizeAspect")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * 构建\n     */")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("PreAuthorizeAspect")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * 定义AOP签名 (切入所有使用鉴权注解的方法)\n     */")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("POINTCUT_SIGN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" @annotation(com.ruoyi.common.security.annotation.RequiresLogin) || "')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@annotation(com.ruoyi.common.security.annotation.RequiresPermissions) || "')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@annotation(com.ruoyi.common.security.annotation.RequiresRoles)"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * 声明AOP签名\n     */")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Pointcut")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("POINTCUT_SIGN")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pointcut")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * 环绕切入\n     * \n     * @param joinPoint 切面对象\n     * @return 底层方法执行后的返回值\n     * @throws Throwable 底层方法抛出的异常\n     */")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Around")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pointcut()"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("around")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ProceedingJoinPoint")]),s._v(" joinPoint"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Throwable")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 注解鉴权")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MethodSignature")]),s._v(" signature "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MethodSignature")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" joinPoint"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSignature")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("checkMethodAnnotation")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("signature"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getMethod")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 执行原有逻辑")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" obj "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" joinPoint"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("proceed")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" obj"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Throwable")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * 对一个Method对象进行注解检查\n     */")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("checkMethodAnnotation")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Method")]),s._v(" method"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 校验 @RequiresLogin 注解")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequiresLogin")]),s._v(" requiresLogin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" method"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getAnnotation")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequiresLogin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("requiresLogin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AuthUtil")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("checkLogin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 校验 @RequiresRoles 注解")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequiresRoles")]),s._v(" requiresRoles "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" method"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getAnnotation")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequiresRoles")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("requiresRoles "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AuthUtil")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("checkRole")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("requiresRoles"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 校验 @RequiresPermissions 注解")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequiresPermissions")]),s._v(" requiresPermissions "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" method"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getAnnotation")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequiresPermissions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("requiresPermissions "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AuthUtil")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("checkPermi")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("requiresPermissions"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br")])]),t("p",[s._v("阅读上面的切面代码，最终得出")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627112200912.png",alt:""}})]),s._v(" "),t("p",[s._v("只要接口方法只要贴有上面3个注解，都需要进行外部鉴权。比如：")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n* 获取用户列表\n*/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequiresPermissions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"system:user:list"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@GetMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/list"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TableDataInfo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("list")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysUser")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("startPage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("List")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" list "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" userService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("selectUserList")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getDataTable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("list"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h4",{attrs:{id:"_7-4-2-内部鉴权"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-4-2-内部鉴权"}},[s._v("#")]),s._v(" 7.4.2 内部鉴权")]),s._v(" "),t("p",[s._v("内部鉴权是微服务与微服务间鉴权，发生在上游微服务访问下游微服务，以请求头标记："),t("strong",[s._v("from-source=inner")]),s._v("有无位依据，有放行，没有拒绝，其目的是实现网络隔离。")]),s._v(" "),t("p",[s._v("来自网关请求，以JWT进行鉴权，来自内部远程调用请求，以"),t("strong",[s._v("from-source=inner")]),s._v("进行鉴权，其他非法请求直接拒绝。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627104552698.png",alt:""}})]),s._v(" "),t("p",[s._v("还是以ry-auth微服务的TokenController类的登录方法为案例")]),s._v(" "),t("h5",{attrs:{id:"_7-4-2-1-步骤1-远程调用过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-4-2-1-步骤1-远程调用过程"}},[s._v("#")]),s._v(" 7.4.2.1 "),t("strong",[s._v("步骤1：远程调用过程")])]),s._v(" "),t("p",[s._v("登录请求，先到TokenController类login方法")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RestController")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TokenController")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TokenService")]),s._v(" tokenService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysLoginService")]),s._v(" sysLoginService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@PostMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"login"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("R")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("login")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestBody")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LoginBody")]),s._v(" form"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 用户登录")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LoginUser")]),s._v(" userInfo "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" sysLoginService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("login")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("form"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUsername")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" form"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getPassword")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取登录token")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("R")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ok")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tokenService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createToken")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userInfo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("p",[s._v("login方法中用到：SysLoginService接口login逻辑")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysLoginService")]),s._v(" sysLoginService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nsysLoginService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("login")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("form"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUsername")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" form"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getPassword")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("观察SysLoginService类，里面引用了接口：RemoteUserService")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Component")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysLoginService")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RemoteUserService")]),s._v(" remoteUserService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * 登录\n     */")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LoginUser")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("login")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" username"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" password"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查询用户信息")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("R")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LoginUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" userResult "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" remoteUserService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUserInfo")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SecurityConstants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("INNER")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n       \n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("p",[s._v("观察RemoteUserService接口所在位置，明显与TokenController/SysLoginService不在同一微服务。")]),s._v(" "),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627105220746.png",alt:""}})])]),s._v(" "),t("p",[s._v("RemoteUserService 属于ry-system微服务，而TokenController类属于ry-auth微服务，那么此处的remoteUserService.getUserInfo为远程调用。")]),s._v(" "),t("blockquote",[t("p",[s._v("一个问题：既然为远程调用，跟普通接口调用有啥区别？")])]),s._v(" "),t("p",[t("strong",[s._v("定义区别：")])]),s._v(" "),t("p",[s._v("使用feign组件，定义远程接口")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@FeignClient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("contextId "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"remoteUserService"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" value "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServiceNameConstants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SYSTEM_SERVICE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" fallbackFactory "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RemoteUserFallbackFactory")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RemoteUserService")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * 通过用户名查询用户信息\n     *\n     * @param username 用户名\n     * @param source 请求来源\n     * @return 结果\n     */")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@GetMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/user/info/{username}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("R")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LoginUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUserInfo")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@PathVariable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"username"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" username"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestHeader")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SecurityConstants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("FROM_SOURCE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" source"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("接口定义，除了正常的username参数之外，多了一个请求头")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestHeader")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SecurityConstants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("FROM_SOURCE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" source\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("调用区别：")])]),s._v(" "),t("p",[s._v("使用Feign组件发起远程接口调用，需要多传一个"),t("strong",[s._v("SecurityConstants.INNER")]),s._v(" 参数")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("remoteUserService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUserInfo")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SecurityConstants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("INNER")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这是为何？")]),s._v(" "),t("p",[t("strong",[s._v("SecurityConstants.INNER")]),s._v("为内部微服务间远程调用请求头标识，上游微服务调用时，添加该标识的请求头，下游微服务接收请求前，进行请求头校验。")]),s._v(" "),t("p",[s._v("即：")]),s._v(" "),t("p",[t("strong",[s._v("定义是指定请求头key：SecurityConstants.FROM_SOURCE")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUserInfo")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@PathVariable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"username"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" username"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestHeader")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SecurityConstants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("FROM_SOURCE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" source"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("调用时，指定请求头value："),t("strong",[s._v("SecurityConstants.INNER")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("remoteUserService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUserInfo")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SecurityConstants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("INNER")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("最终合并")]),s._v(" "),t("p",[t("strong",[s._v("SecurityConstants.FROM_SOURCE = SecurityConstants.INNER")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("from-source = inner\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h5",{attrs:{id:"_7-4-2-2-步骤2-远程正式调用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-4-2-2-步骤2-远程正式调用"}},[s._v("#")]),s._v(" 7.4.2.2 "),t("strong",[s._v("步骤2：远程正式调用")])]),s._v(" "),t("p",[s._v("上面定义的远程接口，最终通过feign方式调用到ruoyi-system微服务SysUserController类的info接口")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627110341990.png",alt:""}})]),s._v(" "),t("p",[s._v("SysUserController类的info接口")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RestController")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/user"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysUserController")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BaseController")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * 获取当前用户信息\n     */")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@InnerAuth")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@GetMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/info/{username}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("R")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LoginUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("info")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@PathVariable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"username"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" username"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysUser")]),s._v(" sysUser "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" userService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("selectUserByUserName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("StringUtils")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("isNull")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sysUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("R")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fail")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"用户名或密码错误"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 角色集合")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Set")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" roles "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" permissionService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRolePermission")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sysUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 权限集合")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Set")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" permissions "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" permissionService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getMenuPermission")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sysUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LoginUser")]),s._v(" sysUserVo "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LoginUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        sysUserVo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setSysUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sysUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        sysUserVo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setRoles")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("roles"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        sysUserVo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setPermissions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("permissions"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("R")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ok")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sysUserVo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("    \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br")])]),t("p",[s._v("这里留意，info方法上面有个**@InnerAuth** 注解，表示当前info方法为远程调用方法，需要进行远程校验，也即：内部鉴权。")]),s._v(" "),t("h5",{attrs:{id:"_7-4-2-3-步骤3-内部鉴权"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-4-2-3-步骤3-内部鉴权"}},[s._v("#")]),s._v(" 7.4.2.3 "),t("strong",[s._v("步骤3：内部鉴权")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Aspect")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Component")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InnerAuthAspect")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Ordered")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Around")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@annotation(innerAuth)"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("innerAround")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ProceedingJoinPoint")]),s._v(" point"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InnerAuth")]),s._v(" innerAuth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Throwable")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" source "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServletUtils")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getHeader")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SecurityConstants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("FROM_SOURCE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 内部请求验证")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("StringUtils")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("equals")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SecurityConstants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("INNER")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" source"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InnerAuthException")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"没有内部访问权限，不允许访问"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" userid "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServletUtils")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getHeader")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SecurityConstants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DETAILS_USER_ID")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" username "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServletUtils")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getHeader")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SecurityConstants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DETAILS_USERNAME")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 用户信息验证")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("innerAuth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("isUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("StringUtils")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("isEmpty")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("StringUtils")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("isEmpty")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InnerAuthException")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"没有设置用户信息，不允许访问 "')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" point"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("proceed")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * 确保在权限认证aop执行前执行\n     */")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getOrder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Ordered")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HIGHEST_PRECEDENCE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br")])]),t("p",[s._v("阅读上面的切面代码，发起切面是切入点事贴有@InnerAuth接口方法。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627112424706.png",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"_7-5-代码生成模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-5-代码生成模块"}},[s._v("#")]),s._v(" 7.5 代码生成模块")]),s._v(" "),t("p",[s._v("若依(RuoYi-Cloud)代码生成模块是一个简单模块，功能顾名思义，用于构建若依体系的代码。")]),s._v(" "),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627121400569.png",alt:""}})])]),s._v(" "),t("p",[s._v("启动后，访问页面：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627121447698.png",alt:""}})]),s._v(" "),t("p",[s._v("这里演示一下代码生成器使用过程。")]),s._v(" "),t("h4",{attrs:{id:"_7-5-1-步骤1-创建表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-5-1-步骤1-创建表"}},[s._v("#")]),s._v(" 7.5.1 步骤1：创建表")]),s._v(" "),t("p",[s._v("在ry-cloud库中创建一个Employee表")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("sys_employee"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AUTO_INCREMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'主键'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'名称'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("age"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'年龄'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'员工表'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h4",{attrs:{id:"_7-5-2-步骤2-导入新建表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-5-2-步骤2-导入新建表"}},[s._v("#")]),s._v(" 7.5.2 步骤2：导入新建表")]),s._v(" "),t("p",[s._v("在代码生成界面导入新建表")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627122048884.png",alt:""}})]),s._v(" "),t("h4",{attrs:{id:"_7-5-3-步骤3-定制代码信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-5-3-步骤3-定制代码信息"}},[s._v("#")]),s._v(" 7.5.3 "),t("strong",[s._v("步骤3：定制代码信息")])]),s._v(" "),t("h5",{attrs:{id:"_7-5-3-1-基本信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-5-3-1-基本信息"}},[s._v("#")]),s._v(" 7.5.3.1 "),t("strong",[s._v("基本信息")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627122210064.png",alt:""}})]),s._v(" "),t("h5",{attrs:{id:"_7-5-3-2-字段信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-5-3-2-字段信息"}},[s._v("#")]),s._v(" 7.5.3.2 "),t("strong",[s._v("字段信息")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627122308878.png",alt:""}})]),s._v(" "),t("p",[t("strong",[s._v("字段列名")]),s._v("：表中列的名称")]),s._v(" "),t("p",[t("strong",[s._v("字段描述")]),s._v("：生成实体类属性注释")]),s._v(" "),t("p",[t("strong",[s._v("物理类型")]),s._v("：表中列的类型")]),s._v(" "),t("p",[t("strong",[s._v("Java类型")]),s._v("：生成实体类属性变量类型")]),s._v(" "),t("p",[t("strong",[s._v("Java属性")]),s._v("：生成实体类属性名")]),s._v(" "),t("p",[t("strong",[s._v("插入")]),s._v("：定义添加操作模态框表单控件，选中表示模态框有这个输入空间")]),s._v(" "),t("p",[t("strong",[s._v("编辑")]),s._v("：定义编辑操作模态框表单控件，选中表示模态框有这个输入空间")]),s._v(" "),t("p",[t("strong",[s._v("列表")]),s._v("：表中数据在列表时，该列数据是否显示，选中为要显示")]),s._v(" "),t("p",[t("strong",[s._v("查询")]),s._v("：该列是否作为列表的查询条件，选中为需要作为查询条件")]),s._v(" "),t("p",[t("strong",[s._v("查询方式")]),s._v("：作为查询条件时，使用匹配方式")]),s._v(" "),t("p",[t("strong",[s._v("显示类型")]),s._v("：查询条件输入类型")]),s._v(" "),t("p",[t("strong",[s._v("字典类型")]),s._v("：查询条件显示类型如果是下拉框，使用字典类型，实现下拉选择")]),s._v(" "),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627123010822.png",alt:""}})])]),s._v(" "),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627123031957.png",alt:""}})])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627122956279.png",alt:""}})]),s._v(" "),t("h5",{attrs:{id:"_7-5-3-3-生成信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-5-3-3-生成信息"}},[s._v("#")]),s._v(" 7.5.3.3 生成信息")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627123327479.png",alt:""}})]),s._v(" "),t("p",[s._v("生成模板：一般不动，以单表操作为主")]),s._v(" "),t("p",[s._v("生成包路径：指定当前代码生成根包路径")]),s._v(" "),t("p",[s._v("生成模块名：该功能所属模块，落地到代码就是所在微服务名称，ruoyi-gateway配置的路由映射路径名")]),s._v(" "),t("p",[s._v("生成业务名：该功能英文名，落地到代码就是controller中操作资源名， 比如：/employee")]),s._v(" "),t("p",[s._v("生成功能名：该功能中文名称")]),s._v(" "),t("p",[s._v("上级菜单：该功能页面展示菜单连接挂载在哪个上级菜单。")]),s._v(" "),t("h5",{attrs:{id:"_7-5-3-4-预览"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-5-3-4-预览"}},[s._v("#")]),s._v(" 7.5.3.4 预览")]),s._v(" "),t("p",[s._v("配置上面各种信息成功之后，可以点击预览，根据需要微调")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627124027839.png",alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627124112142.png",alt:""}})]),s._v(" "),t("h5",{attrs:{id:"_7-5-3-5-生成代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-5-3-5-生成代码"}},[s._v("#")]),s._v(" 7.5.3.5 生成代码")]),s._v(" "),t("p",[s._v("确定无误之后，直接点生成代码")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627124158525.png",alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627124216989.png",alt:""}})]),s._v(" "),t("h4",{attrs:{id:"_7-5-4-步骤4-使用代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-5-4-步骤4-使用代码"}},[s._v("#")]),s._v(" 7.5.4 步骤4：使用代码")]),s._v(" "),t("p",[s._v("压缩包解压得到几个文件：")]),s._v(" "),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627125016476.png",alt:""}})])]),s._v(" "),t("h5",{attrs:{id:"_7-5-4-1-employeemenu-sql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-5-4-1-employeemenu-sql"}},[s._v("#")]),s._v(" 7.5.4.1 "),t("strong",[s._v("employeeMenu.sql")])]),s._v(" "),t("p",[s._v("涉及要添加的菜单，菜单权限，在navicat中执行即可。")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 菜单 SQL")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" sys_menu "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("menu_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parent_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" order_num"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" component"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" is_frame"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" is_cache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" menu_type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" visible"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" perms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" icon"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" create_by"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" create_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" update_by"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" update_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" remark"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'员工'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'employee'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'system/employee/index'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'C'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'system:employee:list'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'admin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sysdate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'员工菜单'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 按钮父菜单ID")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@parentId")]),s._v(" :"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" LAST_INSERT_ID"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 按钮 SQL")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" sys_menu "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("menu_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parent_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" order_num"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" component"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" is_frame"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" is_cache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" menu_type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" visible"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" perms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" icon"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" create_by"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" create_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" update_by"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" update_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" remark"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'员工查询'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@parentId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'F'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'system:employee:query'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'admin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sysdate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" sys_menu "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("menu_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parent_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" order_num"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" component"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" is_frame"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" is_cache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" menu_type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" visible"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" perms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" icon"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" create_by"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" create_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" update_by"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" update_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" remark"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'员工新增'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@parentId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'F'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'system:employee:add'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'admin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sysdate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" sys_menu "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("menu_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parent_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" order_num"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" component"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" is_frame"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" is_cache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" menu_type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" visible"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" perms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" icon"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" create_by"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" create_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" update_by"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" update_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" remark"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'员工修改'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@parentId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'F'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'system:employee:edit'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'admin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sysdate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" sys_menu "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("menu_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parent_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" order_num"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" component"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" is_frame"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" is_cache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" menu_type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" visible"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" perms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" icon"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" create_by"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" create_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" update_by"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" update_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" remark"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'员工删除'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@parentId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'4'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'F'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'system:employee:remove'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'admin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sysdate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" sys_menu "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("menu_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parent_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" order_num"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" component"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" is_frame"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" is_cache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" menu_type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" visible"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" perms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" icon"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" create_by"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" create_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" update_by"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" update_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" remark"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'员工导出'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@parentId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'5'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'F'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'system:employee:export'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'admin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sysdate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("p",[s._v("执行成功后，刷新前端项目，可以看到菜单")]),s._v(" "),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627124525020.png",alt:""}})])]),s._v(" "),t("h5",{attrs:{id:"_7-5-4-2-vue"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-5-4-2-vue"}},[s._v("#")]),s._v(" 7.5.4.2 "),t("strong",[s._v("vue")])]),s._v(" "),t("p",[s._v("ruoyi-ui前端employee这个模块设计到vue页面，与js")]),s._v(" "),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627124648578.png",alt:""}})])]),s._v(" "),t("p",[s._v("分别拷贝到项目api目录，跟views目录")]),s._v(" "),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627124844264.png",alt:""}})])]),s._v(" "),t("p",[s._v("刷新之后，点击员工菜单，缺少后端接口")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627124922670.png",alt:""}})]),s._v(" "),t("h5",{attrs:{id:"_7-5-4-3-main"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-5-4-3-main"}},[s._v("#")]),s._v(" 7.5.4.3 "),t("strong",[s._v("main")])]),s._v(" "),t("p",[s._v("后端接口代码，将main代码拷贝到ruoyi-system  main目录中即可")]),s._v(" "),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627125254678.png",alt:""}})])]),s._v(" "),t("p",[s._v("然后，重启ruoyi-system服务，再访问。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627125740228.png",alt:""}})]),s._v(" "),t("h2",{attrs:{id:"八、定制微服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#八、定制微服务"}},[s._v("#")]),s._v(" 八、定制微服务")]),s._v(" "),t("h3",{attrs:{id:"_8-1-需求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-需求"}},[s._v("#")]),s._v(" 8.1 需求")]),s._v(" "),t("p",[s._v("定制微服务-ruoyi-modules-test")]),s._v(" "),t("h3",{attrs:{id:"_8-2-代码结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-代码结构"}},[s._v("#")]),s._v(" 8.2 代码结构")]),s._v(" "),t("p",[s._v("对外api：ruoyi-api-test")]),s._v(" "),t("p",[s._v("微服务：ruoyi-modules-test")]),s._v(" "),t("h3",{attrs:{id:"_8-3-实现步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-实现步骤"}},[s._v("#")]),s._v(" 8.3 实现步骤")]),s._v(" "),t("h4",{attrs:{id:"_8-3-1-步骤1-定义ruoyi-api-test"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-1-步骤1-定义ruoyi-api-test"}},[s._v("#")]),s._v(" 8.3.1 步骤1：定义ruoyi-api-test")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627130527413.png",alt:""}})]),s._v(" "),t("p",[s._v("导入依赖参考ruoyi-api-system")]),s._v(" "),t("p",[s._v("创建包结构参考ruoyi-api-system")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627131059710.png",alt:""}})]),s._v(" "),t("p",[s._v("这里注意包命名规则：")]),s._v(" "),t("p",[s._v("com.ruoyi-----公司域名倒写")]),s._v(" "),t("p",[s._v("system------微服务名")]),s._v(" "),t("p",[s._v("api------模块名")]),s._v(" "),t("h4",{attrs:{id:"_8-3-2-步骤2-等级ruoyi-api-test依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-2-步骤2-等级ruoyi-api-test依赖"}},[s._v("#")]),s._v(" 8.3.2 步骤2：等级ruoyi-api-test依赖")]),s._v(" "),t("p",[s._v("去父项目ruoyi  pom.xml文件中登记新建的api")]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- test接口 --\x3e")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("com.ruoyi"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("ruoyi-api-test"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("${ruoyi.version}"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h4",{attrs:{id:"_8-3-3-步骤3-定义ruoyi-modules-test"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-3-步骤3-定义ruoyi-modules-test"}},[s._v("#")]),s._v(" 8.3.3 步骤3：定义ruoyi-modules-test")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627131334808.png",alt:""}})]),s._v(" "),t("p",[s._v("导入依赖参考，ruoyi-system 注意要导入ruoyi-api-test依赖")]),s._v(" "),t("p",[s._v("创建包结构参考ruoyi-system")]),s._v(" "),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627132033109.png",alt:""}})])]),s._v(" "),t("h4",{attrs:{id:"_8-3-4-步骤4-定制微服务配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-4-步骤4-定制微服务配置文件"}},[s._v("#")]),s._v(" 8.3.4 步骤4：定制微服务配置文件")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627132159224.png",alt:""}})]),s._v(" "),t("p",[s._v("nacos克隆一份配置文件--克隆自ruoyi-system-dev.yml")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627132356925.png",alt:""}})]),s._v(" "),t("h4",{attrs:{id:"_8-3-5-步骤5-定制网关微服务路由"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-5-步骤5-定制网关微服务路由"}},[s._v("#")]),s._v(" 8.3.5 步骤5：定制网关微服务路由")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627132509241.png",alt:""}})]),s._v(" "),t("p",[t("em",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/langfeiyes/images-khub/image-20230627132552907.png",alt:""}})])]),s._v(" "),t("p",[s._v("到这，定制微服务就结束了，剩下操作就是常规crud了。")]),s._v(" "),t("h2",{attrs:{id:"九、小结与作业"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#九、小结与作业"}},[s._v("#")]),s._v(" 九、小结与作业")]),s._v(" "),t("p",[s._v("将整篇教程总结一下：若依(Ruoyi-Cloud)版本使用")]),s._v(" "),t("p",[t("strong",[s._v("启动")])]),s._v(" "),t("p",[s._v("1>官网克隆项目到idea")]),s._v(" "),t("p",[s._v("2>按照文档，建库，建表，配置nacos")]),s._v(" "),t("p",[s._v("3>准备各种环境，修改本地配置")]),s._v(" "),t("p",[s._v("4>前后端启动，测试。")]),s._v(" "),t("p",[t("strong",[s._v("模块解读")])]),s._v(" "),t("p",[s._v("1>网关模块，所有请求入口")]),s._v(" "),t("p",[s._v("2>鉴权模块，外部鉴权，内部鉴权")]),s._v(" "),t("p",[s._v("3>代码生成模块，先建表，再定制，后覆盖")]),s._v(" "),t("p",[s._v("微服务定制")]),s._v(" "),t("p",[s._v("1>拷贝模仿现有api/modules")]),s._v(" "),t("p",[s._v("2>配置中心加配置文件")]),s._v(" "),t("p",[s._v("3>网关配置转发路由")])])}),[],!1,null,null,null);t.default=e.exports}}]);